 <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Hello there</title>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EDBMY4LZ93"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EDBMY4LZ93');
</script>

    <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon.png">

    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T88WV3HD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div class="gender-selection" id="genderSelection">
        <h1>Tu es ?</h1>
        <p style="color: #E0D8C7; margin-bottom: 1.5rem;">(Promis, c'est juste pour savoir comment te saluer üòâ)</p>
        <a href="html/femme.html" class="btn gender-btn" id="link-femme">Une Femme</a>
        <a href="html/homme.html" class="btn gender-btn" id="link-homme">Un Homme</a>
    </div> <div class="result-homme" id="resultHomme">
        <img src="https://raw.githubusercontent.com/soteo3d/Qrcard-TEST/media/homme.png" alt="Image dr√¥le pour les hommes"> <!--CHEMIN A MODIFIER-->
        <p style="color: #E0D8C7; margin-top: 1rem;">Merci pour le scan üòâ</p>
        </div> <div class="card-container" id="cardContainer">
        <div class="card front" id="frontCard">
            <h1 style="position: relative; top: -25px;">Th√©ophile</h1>
            <p>Appuie pour d√©couvrir ‚ú®</p>
            <span class="tap-hint">üëÜ</span>
        </div> <div class="card back" id="backCard">
           <h1 style="position: relative; top: -25px;">Th√©ophile</h1>
           <img src="https://raw.githubusercontent.com/soteo3d/QRcard/media/oui.JPG" alt="Photo de Th√©ophile" class="profile-pic"><!--CHEMIN A MODIFIER-->
           <p>On ne se serait pas crois√© ?</p>
           <button class="btn" id="btnMoi">Moi</button>
           <button class="btn" id="btnPassions">Passions</button>
           <a class="btn insta-btn" href="https://www.instagram.com/theophile_drd/profilecard/" target="_blank">Insta ? üì∏</a>
        </div> </div> <div class="sub-card" id="cardMoi">
        <h1>Moi</h1>
        <p>√Çge: 27</p>
        <p>Lieu: Saint-Germain</p>
        <p>Travail: Finance</p>
        <p>Personnalit√©: Dr√¥le, Attentionn√©, Aventureux, Calme, Cr√©atif</p>
        <button class="btn" onclick="showBack()">‚Ü© Retour</button>
    </div> <div class="sub-card" id="cardPassions">
        <h1>Passions</h1>
        <p>Moto üèçÔ∏è</p>
        <p>Cuisine üç≥)</p>
        <p>Astronomie üî≠</p>
        <p>Jeux vid√©o üéÆ </p>
        <p>√âpicurien moderne üç∑</p>
        <button class="btn" onclick="showBack()">‚Ü© Retour</button>
    </div> <audio id="clickSound" src="https://www.myinstants.com/media/sounds/rizz-sound-effect.mp3" preload="auto"></audio><!--CHEMIN A MODIFIER-->
    <audio id="hommeSound" src="https://raw.githubusercontent.com/soteo3d/Qrcard-TEST/media/audio.mp3" preload="auto"></audio><!--CHEMIN A MODIFIER-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="script.js"></script>
    <script type="module">
      // Importe les fonctions Firebase n√©cessaires (v9+)
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js"; // Adapte la version si besoin !
      // Importe Analytics si Firebase te l'a inclus et que tu veux l'utiliser
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js"; // Adapte la version si besoin !

      // 1. TA configuration Firebase (celle que tu as fournie)
      const firebaseConfig = {
        apiKey: "AIzaSyD-ZOt111dwR0Su7pkjtfzzpAuntYoMgTQ", // Ton API Key r√©elle
        authDomain: "qrcard-7081d.firebaseapp.com",
        projectId: "qrcard-7081d",
        storageBucket: "qrcard-7081d.firebasestorage.app", // Celle que tu as fournie
        messagingSenderId: "357248780425",
        appId: "1:357248780425:web:7e52079decd8a90fbade58",
        measurementId: "G-KT2RBKFG7K" // Optionnel
      };

      // 2. Initialise Firebase (v9+)
      const app = initializeApp(firebaseConfig);
      // Initialise Analytics si import√© (optionnel)
      // const analytics = getAnalytics(app); 
      console.log("Firebase Initialized (v9 modular)."); // Log pour v√©rifier dans la console navigateur

      // --- Code pour compter les clics ---

      // 3. Colle ici l'URL de TA Cloud Function d√©ploy√©e
      // (Celle obtenue apr√®s 'firebase deploy --only functions' r√©ussi)
      const functionUrl = 'https://recordclick-t4i7rmw3va-ew.a.run.app'; // <--- METS TON URL DE FONCTION ICI !

      const linkHomme = document.getElementById('link-homme');
      const linkFemme = document.getElementById('link-femme');

      // Fonction pour g√©rer le clic
      async function handleClick(event, type) {
        event.preventDefault(); // Emp√™che la navigation imm√©diate
        console.log(`Clic d√©tect√© sur : ${type}. Appel de la fonction √† ${functionUrl}...`);

        try {
          // Appel √† la Cloud Function via fetch
          const response = await fetch(functionUrl, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json', // Important
            },
            body: JSON.stringify({ type: type }) // Envoie 'homme' ou 'femme'
          });

          if (response.ok) {
            const result = await response.json(); 
            console.log(`Fonction ex√©cut√©e avec succ√®s: ${result.message}`);
          } else {
            console.error('Erreur renvoy√©e par la fonction:', response.status, await response.text());
          }
        } catch (error) {
          console.error('Erreur r√©seau ou autre lors de l appel de la fonction:', error);
        } 
      }

      // Ajoute les √©couteurs d'√©v√©nements
      if (linkHomme) {
          linkHomme.addEventListener('click', (event) => handleClick(event, 'homme'));
          console.log("√âcouteur ajout√© pour Homme.");
      }
      if (linkFemme) {
         linkFemme.addEventListener('click', (event) => handleClick(event, 'femme'));
         console.log("√âcouteur ajout√© pour Femme.");
      }

    </script>
    </body>
</html>
